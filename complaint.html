<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CommunityConnect | Complaints</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="complaint.css">
</head>
<body>
    <header class="navbar">
        <div class="logo">CommunityConnect</div>
        <div class="user-welcome-container">
            <div id="welcome-message">Welcome</div>
            <div id="user-role">Loading...</div>
        </div>
        <nav class="nav-links">
            <a href="dashboard.html">Home</a>
        </nav>
        <div class="auth-buttons">
            <button class="logout-btn">Logout</button>
        </div>
    </header>

    <section class="dashboard-header">
        <h1>Complaint Box</h1>
        <p>Lodge and track your complaints</p>
    </section>

    <div class="container">
        <form id="complaintForm">
            <label for="complaintType">Complaint Type:</label>
            <select id="complaintType" required>
                <option value="" disabled selected>Select complaint type</option>
                <option value="society_related">Society Related</option>
                <option value="member_related">Member Related</option>
            </select>

            <label for="complaint">Complaint:</label>
            <textarea id="complaint" placeholder="Describe your complaint" rows="4" required></textarea>

            <button type="submit">Submit Complaint</button>
        </form>
        <p id="complaintMessage"></p>

        <div class="action-buttons">
            <button id="viewComplaintsBtn" type="button">View My Complaints</button>
            <button id="viewAllComplaintsBtn" type="button" class="role-restricted admin-only">View All Pending Complaints</button>
        </div>
        
        <div id="complaintsContainer" class="complaints-container hidden">
            <h2>My Complaints</h2>
            <div id="complaintsList"></div>
        </div>

        <div id="allComplaintsContainer" class="complaints-container hidden">
            <h2>All Pending Complaints</h2>
            <div id="allComplaintsList"></div>
        </div>
    </div>

    <!-- Modal for entering closing reason -->
    <div id="closingReasonModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Provide Closing Reason</h3>
            <textarea id="closingReasonText" rows="4" placeholder="Enter the reason for resolving/rejecting this complaint"></textarea>
            <div class="modal-buttons">
                <button id="submitReasonBtn">Submit</button>
                <button id="cancelReasonBtn">Cancel</button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 CommunityConnect. All rights reserved.</p>
    </footer>

    <script type="module" src="complaint.js"></script>
</body>
</html>
